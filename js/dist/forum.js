module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){t.exports=flarum.core.compat["common/app"]},function(t,e){t.exports=flarum.core.compat["common/extend"]},function(t,e){t.exports=flarum.core.compat["common/components/TextEditor"]},function(t,e){t.exports=flarum.core.compat["common/components/TextEditorButton"]},function(t,e){t.exports=flarum.core.compat["common/components/Modal"]},function(t,e){t.exports=flarum.core.compat["common/components/Button"]},function(t,e){t.exports=flarum.core.compat["common/components/LoadingIndicator"]},,function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(0),a=n.n(o),i=n(2),s=n.n(i),l=n(3),c=n.n(l);function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f,p,d,h,g=n(4),y=n.n(g),v=n(5),k=n.n(v),j=n(6),L=n.n(j);function b(){var t=""===d?"https://api.giphy.com/v1/gifs/trending?api_key="+p+"&limit=20&offset="+h:"https://api.giphy.com/v1/gifs/search?api_key="+p+"&q="+d+"&limit=20&offset="+h,e=document.getElementById("therealsujitk-gifs-container"),n=e.getElementsByClassName("therealsujitk-gifs-column"),r=e.getElementsByClassName("LoadingIndicator-container")[0],o=e.getElementsByClassName("therealsujitk-gifs-end")[0];if(0==h){for(var a=0;a<n.length;++a)n[a].innerHTML="";o.style.display="none",r.style.display="flex"}fetch(t).then((function(t){return t.json()})).then((function(t){if(void 0!==t.data)for(var e=0;e<20;++e){var a=document.createElement("img");if(void 0===t.data[e]){r.style.display="none",o.style.display="inline-block";break}a.src=t.data[e].images.downsized.url,a.alt=t.data[e].title,a.addEventListener("click",(function(t){var e="![Giphy - "+t.target.alt+"]("+t.target.src+")";f.insertAtCursor(e),app.modal.close()})),n[e%2].insertAdjacentElement("beforeend",a)}else console.error("Sorry, there was something wrong with the Giphy API Key.")}))}var x=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n);var o=r.prototype;return o.className=function(){return"SearchGIFModal"},o.title=function(){return app.translator.trans("therealsujitk.forum.gifs.title")},o.content=function(){var t=this;return m(".Modal-body",{oncreate:function(){f=t.attrs.textArea,p=app.forum.attribute("therealsujitk-gifs.giphy_api_key"),d="",h=0,b()}},m("div",{id:"therealsujitk-gifs-search"},[m("div",{className:"Search-input"},[m("input",{className:"FormControl",placeholder:app.translator.trans("therealsujitk.forum.gifs.searchGiphy"),onkeydown:function(t){"Enter"===t.key&&(t.preventDefault(),d=document.getElementById("therealsujitk-gifs-search").getElementsByTagName("input")[0].value,h=0,b())}})]),k.a.component({className:"Button Button--primary hasIcon",onclick:function(){d=document.getElementById("therealsujitk-gifs-search").getElementsByTagName("input")[0].value,h=0,b()}},app.translator.trans("therealsujitk.forum.gifs.search"))]),m("div",{id:"therealsujitk-gifs-container",oncreate:function(){var t=document.getElementById("therealsujitk-gifs-container");t.addEventListener("scroll",(function(){t.scrollTop===t.scrollHeight-t.offsetHeight&&(h+=20,b())}))}},[m("div",{className:"therealsujitk-gifs-column"}),m("div",{className:"therealsujitk-gifs-column"}),L.a.component(),m("span",{className:"therealsujitk-gifs-end"},app.translator.trans("therealsujitk.forum.gifs.end"))]),m("div",{id:"therealsujitk-gifs-footer"},[m("img",{src:app.forum.attribute("baseUrl")+"/assets/extensions/therealsujitk-gifs/powered_by_giphy.svg"})]))},r}(y.a);a.a.initializers.add("therealsujitk/flarum-ext-gifs",(function(){Object(r.extend)(s.a.prototype,"toolbarItems",(function(t){var e=this;t.add("my-item",c.a.component({id:"therealsujitk-gifs-toolbar-item",title:a.a.translator.trans("therealsujitk.forum.gifs.label"),className:"Button Button--icon Button--link hasIcon",onclick:function(){return a.a.modal.show(x,{textArea:e.attrs.composer.editor})}},[m("svg",{id:"therealsujitk-gifs-toolbar-item",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"7pt",viewBox:"0 0 16 7",version:"1.1"},[m("g",{id:"surface1"},[m("path[fill = currentColor]",{d:"M 0.78125 7.042969 C 0.496094 6.933594 0.265625 6.738281 0.132812 6.480469 L 0 6.234375 L 0 0.875 L 0.132812 0.625 C 0.277344 0.355469 0.558594 0.128906 0.847656 0.0429688 C 0.957031 0.015625 1.71875 0 2.917969 0.0078125 L 4.808594 0.0234375 L 5.050781 0.15625 C 5.21875 0.246094 5.332031 0.355469 5.425781 0.511719 C 5.597656 0.800781 5.648438 0.992188 5.648438 1.410156 L 5.648438 1.753906 L 1.65625 1.753906 L 1.65625 5.355469 L 3.96875 5.355469 L 3.96875 3.554688 L 5.648438 3.554688 L 5.648438 4.800781 C 5.648438 5.484375 5.628906 6.117188 5.605469 6.207031 C 5.523438 6.527344 5.308594 6.808594 5.050781 6.953125 L 4.808594 7.085938 L 2.878906 7.09375 C 1.339844 7.105469 0.917969 7.09375 0.78125 7.042969 Z M 0.78125 7.042969 "}),m("path[fill = currentColor]",{d:"M 7.371094 3.554688 L 7.371094 0 L 9.050781 0 L 9.050781 7.109375 L 7.371094 7.109375 Z M 7.371094 3.554688 "}),m("path[fill = currentColor]",{d:"M 10.773438 3.554688 L 10.773438 0 L 15.855469 0 L 15.855469 1.753906 L 12.453125 1.753906 L 12.453125 2.988281 L 14.722656 2.988281 L 14.722656 4.742188 L 12.453125 4.742188 L 12.453125 7.109375 L 10.773438 7.109375 Z M 10.773438 3.554688 "})])])]))}))}))}]);
//# sourceMappingURL=forum.js.map